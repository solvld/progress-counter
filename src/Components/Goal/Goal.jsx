import React, { useState } from 'react'

import "./_goal.scss"

function Goal(props) {
  const [active, setActive] = useState(false);
  const [progress, setProgress] = useState(0);

  const showMenu = () => setActive((prev) => !prev); //useEffect for close each one if click target on other element

  let percents = Math.floor((progress / props.amount) * 100);

	return (
		<div className='Goal'>
			<div className='content'>
				<div className='top-content'>
					<p className='percents'>{percents}%</p>
					<div className={active ? 'settings active' : 'settings'}>
						<i className='settings-btn' onClick={showMenu}>
							<svg
								xmlns='http://www.w3.org/2000/svg'
								width='24'
								height='24'
								viewBox='0 0 24 24'
								fill='none'
							>
								<path
									d='M4 12C4 12.2652 4.10536 12.5196 4.29289 12.7071C4.48043 12.8946 4.73478 13 5 13C5.26522 13 5.51957 12.8946 5.70711 12.7071C5.89464 12.5196 6 12.2652 6 12C6 11.7348 5.89464 11.4804 5.70711 11.2929C5.51957 11.1054 5.26522 11 5 11C4.73478 11 4.48043 11.1054 4.29289 11.2929C4.10536 11.4804 4 11.7348 4 12ZM11 12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13C12.2652 13 12.5196 12.8946 12.7071 12.7071C12.8946 12.5196 13 12.2652 13 12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12ZM18 12C18 12.2652 18.1054 12.5196 18.2929 12.7071C18.4804 12.8946 18.7348 13 19 13C19.2652 13 19.5196 12.8946 19.7071 12.7071C19.8946 12.5196 20 12.2652 20 12C20 11.7348 19.8946 11.4804 19.7071 11.2929C19.5196 11.1054 19.2652 11 19 11C18.7348 11 18.4804 11.1054 18.2929 11.2929C18.1054 11.4804 18 11.7348 18 12Z'
									stroke='#111114'
									stroke-width='2'
									stroke-linecap='round'
									stroke-linejoin='round'
								/>
							</svg>
						</i>

						<ul className='settings-menu'>
							<li>
								<svg
									xmlns='http://www.w3.org/2000/svg'
									width='16'
									height='14'
									viewBox='0 0 14 14'
									fill='none'
								>
									<path
										d='M10.8593 6.26234V11.9683C10.8593 12.1146 10.8012 12.2549 10.6977 12.3584C10.5942 12.4619 10.4539 12.52 10.3076 12.52H2.03172C1.88539 12.52 1.74506 12.4619 1.64159 12.3584C1.53813 12.2549 1.48 12.1146 1.48 11.9683V5.34759H5.53131L8.8422 2.03724H2.03172C1.11917 2.03724 0.376549 2.77986 0.376549 3.69241V11.9683C0.376549 12.8808 1.11917 13.6234 2.03172 13.6234H10.3076C11.2201 13.6234 11.9628 12.8808 11.9628 11.9683V5.15834L10.8593 6.26234ZM12.52 3.04027L13.3001 2.26014C13.4055 2.15835 13.4896 2.03659 13.5474 1.90196C13.6053 1.76734 13.6357 1.62254 13.637 1.47603C13.6382 1.32951 13.6103 1.18421 13.5548 1.0486C13.4994 0.912992 13.4174 0.78979 13.3138 0.686184C13.2102 0.582578 13.087 0.500644 12.9514 0.445161C12.8158 0.389679 12.6705 0.36176 12.524 0.363033C12.3775 0.364306 12.2327 0.394746 12.098 0.452577C11.9634 0.510407 11.8416 0.594471 11.7399 0.699861L10.9597 1.48L12.52 3.04027Z'
										fill='#FCFDFF'
									/>
								</svg>
								Edit
							</li>
							<li>
								<svg
									xmlns='http://www.w3.org/2000/svg'
									width='16'
									height='16'
									viewBox='0 0 16 16'
									fill='none'
								>
									<path
										fill-rule='evenodd'
										clip-rule='evenodd'
										d='M5.02 2.31333C5.11363 2.40708 5.16623 2.53417 5.16623 2.66667C5.16623 2.79917 5.11363 2.92625 5.02 3.02L3.87333 4.16667H10C11.0167 4.16667 11.9917 4.57053 12.7106 5.28942C13.4295 6.00831 13.8333 6.98334 13.8333 8C13.8333 9.01666 13.4295 9.99169 12.7106 10.7106C11.9917 11.4295 11.0167 11.8333 10 11.8333H5.33333C5.20072 11.8333 5.07355 11.7807 4.97978 11.6869C4.88601 11.5931 4.83333 11.4659 4.83333 11.3333C4.83333 11.2007 4.88601 11.0735 4.97978 10.9798C5.07355 10.886 5.20072 10.8333 5.33333 10.8333H10C10.7514 10.8333 11.4721 10.5348 12.0035 10.0035C12.5348 9.47212 12.8333 8.75145 12.8333 8C12.8333 7.24855 12.5348 6.52788 12.0035 5.99653C11.4721 5.46518 10.7514 5.16667 10 5.16667H3.87333L5.02 6.31333C5.06912 6.35911 5.10853 6.41431 5.13585 6.47564C5.16318 6.53697 5.17788 6.60318 5.17906 6.67032C5.18025 6.73745 5.1679 6.80414 5.14275 6.8664C5.1176 6.92866 5.08017 6.98521 5.03269 7.03269C4.98521 7.08017 4.92866 7.1176 4.8664 7.14275C4.80414 7.1679 4.73745 7.18025 4.67032 7.17906C4.60318 7.17788 4.53697 7.16318 4.47564 7.13585C4.41431 7.10853 4.35911 7.06912 4.31333 7.02L2.31333 5.02C2.2197 4.92625 2.16711 4.79917 2.16711 4.66667C2.16711 4.53417 2.2197 4.40708 2.31333 4.31333L4.31333 2.31333C4.40708 2.2197 4.53417 2.16711 4.66667 2.16711C4.79917 2.16711 4.92625 2.2197 5.02 2.31333Z'
										fill='#FCFDFF'
									/>
								</svg>
								Undo
							</li>
							<li>
								<svg
									xmlns='http://www.w3.org/2000/svg'
									width='16'
									height='16'
									viewBox='0 0 16 16'
									fill='none'
								>
									<path
										d='M4.95238 2.66667C3.11314 3.71581 1.90476 5.73105 1.90476 8C1.90476 9.20552 2.26224 10.384 2.932 11.3863C3.60175 12.3887 4.55369 13.1699 5.66745 13.6313C6.78121 14.0926 8.00676 14.2133 9.18912 13.9781C10.3715 13.7429 11.4576 13.1624 12.31 12.31C13.1624 11.4576 13.7429 10.3715 13.9781 9.18912C14.2133 8.00676 14.0926 6.78121 13.6313 5.66745C13.1699 4.55369 12.3887 3.60175 11.3863 2.932C10.384 2.26224 9.20552 1.90476 8 1.90476'
										stroke='#FCFDFF'
										stroke-linecap='round'
										stroke-linejoin='round'
									/>
									<path
										d='M4.95238 5.71428V2.66666H1.90476'
										stroke='#FCFDFF'
										stroke-linecap='round'
										stroke-linejoin='round'
									/>
								</svg>
								Reset
							</li>
						</ul>
					</div>
				</div>
				<div className='bottom-content'>
					<div className='bottom-left'>
						<p className='description'>Read 100 books</p>
						<p className='progress'>
							{progress} / {props.amount}
						</p>
					</div>
					<button
						className='button-plus'
						onClick={() => setProgress(prev => prev + props.step)}
						style={{ stroke: props.color }}
					>
						<svg
							xmlns='http://www.w3.org/2000/svg'
							width='28'
							height='28'
							viewBox='0 0 28 28'
							fill='none'
						>
							<path
								d='M14.05 2.33334L14.02 25.6667M2.33334 14H25.6667'
								// stroke="#000"
								stroke-width='4'
								stroke-linecap='round'
								stroke-linejoin='round'
							/>
						</svg>
					</button>
				</div>
			</div>
			<div
				className='progress-fill'
				style={{ backgroundColor: props.color, height: `${percents}%` }}
			></div>
		</div>
	)
}

export default Goal;
